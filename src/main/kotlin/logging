The Stack and the Map are managed per thread and are based on ThreadLocal by default.
The Map can be configured to use an InheritableThreadLocal by setting system property log4j2.isThreadContextMapInheritable to true.
When configured this way, the contents of the Map will be passed to child threads.
https://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#privilegedThreadFactory()